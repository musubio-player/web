<!--
An element for fetching Musubio channels

Example:

    <channel-list></channel-list>

@element channel-list
-->
<dom-module id="channel-list">
  <template>
    <iron-ajax
      auto
      url="[[musubioApiHost]]/_ah/api/musubio/v1/channels"
      handle-as="json"
      last-response="{{response}}">
    </iron-ajax>

    <template class="channel" is="dom-repeat" items="{{response.channels}}" as="channel">
      <paper-card class="item-list">
        <a href="#/channels/{{channel.id}}">
        <!--<a href="#/channels/{{channel.id}}" on-tap="onChannelSelected">-->
        <!--<a href="#" on-tap="onChannelSelected" onclick="return false;">-->
          <div class="info">
            <div class="image">
              <img src="{{channel.videos.0.image.medium}}">
            </div>
            <div class="content">
              <div class="title">{{channel.title}}</div>
              <div class="description quiet">{{channel.description}}</div>
            </div>
          </div>
        </a>
      </paper-card>
    </template>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'channel-list',
    ready: function() {
      console.log('ready() from channel-list');

      mainController.setPlayerViewMode('toolbar');
    },
    properties: {
      musubioApiHost: {
        type: String,
        value: musubioApiHost
      }
    },
    onChannelSelected: function(event, detail, sender) {
      console.log('onChannelSelected()');

      var channel = event.model.channel;
      mainController.onChannelChange(channel);
    }
  });
</script>